(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{567:function(t,e,n){"use strict";n.r(e);n(307);var r=n(31),o=n(42),c=n(36),l=n(27),h=n(13),f=n(308);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){Object(o.a)(n,t);var e=d(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).baseUrl="https://nakamura196.github.io/repo",t}return n}(f.Vue);v([Object(f.Prop)({default:4})],y.prototype,"col",void 0),v([Object(f.Prop)({default:[]})],y.prototype,"list",void 0);var m=y=v([f.Component],y),w=n(103),P=n(142),R=n.n(P),_=n(219),j=n(92),E=n(511),I=n(516),O=n(176),k=n(512),F=n(503),C=n(524),component=Object(w.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",t._l(t.list,(function(e,r){return n("v-col",{key:r,attrs:{cols:"12",sm:12/t.col}},[n("v-card",{staticClass:"mb-4",attrs:{"no-body":""}},[n("nuxt-link",{attrs:{to:t.localePath(e.path)}},[n("v-img",{staticClass:"grey lighten-2",staticStyle:{height:"150px"},attrs:{src:e.image,contain:"",width:"100%"}})],1),t._v(" "),n("div",{staticClass:"pa-4"},[n("nuxt-link",{attrs:{to:t.localePath(e.path)}},[n("b",[t._v(t._s(e.label))])]),t._v(" "),e.description?n("p",{staticClass:"mt-2 mb-0"},[t._v(t._s(e.description))]):t._e()],1),t._v(" "),e.url?[n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on;return[n("a",t._g({attrs:{target:"_blank",href:e.url}},o),[n("img",{attrs:{width:"30px",src:t.baseUrl+"/img/icons/rdf-logo.svg"}})])]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s("RDF"))])])],1)]:t._e()],2)],1)})),1)}),[],!1,null,null,null);e.default=component.exports;R()(component,{VCard:_.a,VCardActions:j.a,VCol:E.a,VDivider:I.a,VImg:O.a,VRow:k.a,VSpacer:F.a,VTooltip:C.a})},583:function(t,e,n){"use strict";n.r(e);n(26),n(14),n(307),n(32),n(229),n(51);var r=n(16),o=n(31),c=n(43),l=n(42),h=n(36),f=n(27),d=n(13),v=n(180),y=n(131),m=n.n(y);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var P=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},R=function(t){Object(l.a)(f,t);var e,n,h=w(f);function f(){var t;return Object(o.a)(this,f),(t=h.apply(this,arguments)).settings={agential:{type:"type:Agent",query:"fc-agentials",label:"人物"},place:{type:"type:Place",query:"fc-places",label:"場所"}},t.loadingFlag=!0,t.results=[],t.label="",t.people=[],t.total=0,t.perPage=20,t.currentPage=1,t.id="",t}return Object(c.a)(f,[{key:"watchTmp",value:function(){this.search()}},{key:"mounted",value:function(){this.search()}},{key:"getTotal",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="agential"===this.id?"Agent":"Place",n="\n      PREFIX schema: <http://schema.org/>\n      PREFIX type: <https://jpsearch.go.jp/term/type/>\n      PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n      PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n      PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      PREFIX owl: <http://www.w3.org/2002/07/owl#>\n      PREFIX dct: <http://purl.org/dc/terms/>\n      PREFIX hpdb: <https://w3id.org/hpdb/api/>\n      PREFIX sh: <http://www.w3.org/ns/shacl#>\n      SELECT DISTINCT (count(?s) as ?c) WHERE {\n        ?s rdf:type type:".concat(e," . \n      }\n    "),r=(r="https://dydra.com/ut-digital-archives/shibusawa/sparql?query=")+encodeURIComponent(n)+"&output=json",t.next=6,m.a.get(r);case 6:return o=t.sent,t.abrupt("return",o.data[0].c);case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"search",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,r,o,c,l,h,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.params.id,this.id=e,t.next=4,this.getTotal();case 4:n=t.sent,this.total=n,this.loadingFlag=!0,r=this.settings[e],o=r.type,c=Number(this.$route.query.from)||0,this.currentPage=c/this.perPage+1,l="\n      PREFIX schema: <http://schema.org/>\n      PREFIX type: <https://jpsearch.go.jp/term/type/>\n      PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n      PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n      PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      PREFIX owl: <http://www.w3.org/2002/07/owl#>\n      PREFIX dct: <http://purl.org/dc/terms/>\n      PREFIX hpdb: <https://w3id.org/hpdb/api/>\n      PREFIX sh: <http://www.w3.org/ns/shacl#>\n      SELECT DISTINCT * WHERE {\n        ?s rdfs:label ?label;  rdf:type ".concat(o,"\n            optional { ?s schema:image ?image } \n      }\n      ORDER BY desc(?image)\n      LIMIT ").concat(this.perPage,"\n      OFFSET ").concat(c,"\n    "),h=(h="https://dydra.com/ut-digital-archives/shibusawa/sparql?query=")+encodeURIComponent(l)+"&output=json",m.a.get(h).then((function(t){for(var n=t.data,r=[],i=0;i<n.length;i++){var o=n[i];if(!o.label.value){var c="agential"===e?e:"spatial";"dev_MAIN[refinementList][".concat(c,"][0]"),o.label;var l={label:o.label,path:{name:"entity-entity-id",params:{entity:c,id:o.label}}};o.image?l.image=o.image:l.image="https://nakamura196.github.io/repo/img/icons/no-image.png";var h="https://nakamura196.github.io/repo/snorql/?describe="+o.s;l.url=h,r.push(l)}}f.people=r,f.loadingFlag=!1}));case 15:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"head",value:function(){return{title:this.$t("category")+" : "+this.$t(this.title),meta:[{hid:"description",name:"description",content:this.$t("search_by_category")}]}}},{key:"setCurrentPage",value:function(t){var e=(t-1)*this.perPage;this.$router.push(this.localePath({name:"entity-id",params:{id:this.id},query:{from:e}}),(function(){}),(function(){}))}},{key:"paginationLength",get:function(){return Math.ceil(this.total/this.perPage)}},{key:"title",get:function(){return this.settings[this.$route.params.id].label}}]),f}(v.Vue);P([Object(v.Watch)("$route",{deep:!0})],R.prototype,"watchTmp",null);var _=R=P([Object(v.Component)({})],R),j=n(103),E=n(142),I=n.n(E),O=n(232),k=n(505),F=n(573),C=n(216),X=n(56),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-sheet",{attrs:{color:"grey lighten-3"}},[n("v-container",{staticClass:"py-4"},[n("h1",["ja"===t.$i18n.locale?[t._v("\n          "+t._s(t.$t(t.title))+t._s(t.$t("browse_by"))+"\n        ")]:[t._v("\n          "+t._s(t.$t("browse_by"))+"\n          "+t._s(t.$t(t.title))+"\n        ")],t._v("\n        （"+t._s(t.total.toLocaleString())+"）\n      ")],2)])],1),t._v(" "),n("v-container",[n("div",{staticClass:"my-5"},t._l(t.settings,(function(e,r){return n("v-btn",{key:r,staticClass:"my-1 mr-4",attrs:{to:t.localePath({name:"entity-id",params:{id:r}})}},[t._v("\n        "+t._s(e.label)+"\n      ")])})),1),t._v(" "),t.loadingFlag?[n("div",{staticClass:"text-center my-10"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]:[n("div",{staticClass:"text-center my-5"},[n("v-pagination",{attrs:{length:t.paginationLength,"total-visible":7},on:{input:t.setCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),n("grid",{attrs:{col:4,list:t.people}}),t._v(" "),n("div",{staticClass:"text-center my-5"},[n("v-pagination",{attrs:{length:t.paginationLength,"total-visible":7},on:{input:t.setCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]],2)],1)}),[],!1,null,null,null);e.default=component.exports;I()(component,{Grid:n(567).default}),I()(component,{VBtn:O.a,VContainer:k.a,VPagination:F.a,VProgressCircular:C.a,VSheet:X.a})}}]);